
<!-- app/views/workout_entries/_form.html.erb -->
<div class="card max-w-xl">
  <%= form_with model: @workout_entry, data: { controller: "exercise-filter" } do |f| %>
    <div class="mb-4">
      <label class="label">Month Plan</label>
      <%= f.collection_select :month_plan_id, MonthPlan.order(start_date: :desc), :id, :title,
                              {}, class: "input", data: { "exercise-filter-target": "planSelect", action: "change->exercise-filter#changePlan" } %>
    </div>

    <div class="mb-4">
      <label class="label">Exercise</label>
      <%= f.collection_select :exercise_id, @exercises, :id, :name,
                              { include_blank: "Select exercise" }, class: "input", data: { "exercise-filter-target": "exerciseSelect", action: "change->exercise-filter#updateUnit" } %>
      <p class="text-xs text-slate-500 mt-1" data-exercise-filter-target="unitHint">Choose an exercise</p>
    </div>

    <div class="mb-4">
      <label class="label">Date</label>
      <%= f.date_field :performed_on, class: "input" %>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-4">
      <div>
        <label class="label">Sets</label>
        <%= f.number_field :sets, class: "input", placeholder: "e.g. 3" %>
      </div>
      <div>
        <label class="label">Reps</label>
        <%= f.number_field :reps, class: "input", placeholder: "e.g. 8" %>
      </div>
      <div>
        <label class="label">Weight</label>
        <%= f.number_field :weight, step: 0.5, class: "input", placeholder: "kg / lb",
                           data: { "exercise-filter-target": "weightInput" } %>
      </div>
      <div>
        <label class="label">Duration (min)</label>
        <%= f.number_field :duration_minutes, class: "input", placeholder: "e.g. 20" %>
      </div>
      <div>
        <label class="label">Distance (km)</label>
        <%= f.number_field :distance_km, step: 0.01, class: "input", placeholder: "e.g. 5.00" %>
      </div>
    </div>

    <div class="mb-4">
      <label class="label">Notes</label>
      <%= f.text_area :notes, rows: 3, class: "input", placeholder: "How did it feel today?" %>
    </div>

    <div class="flex gap-2">
      <%= f.submit (@workout_entry.new_record? ? "Save Entry" : "Update Entry"), class: "btn" %>
      <%= link_to "Cancel", workout_entries_path, class: "btn-secondary" %>
    </div>
  <% end %>
</div>
