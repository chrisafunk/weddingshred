
<% content_for :dashboard_bar do %>
  Admin Dashboard
<% end %>

<div class="content-body default-height">
  <div class="container-fluid">
    <!-- row -->
    <div class="row">
      <div class="col-xl-12 col-xxl-12">

          <%= render layout: "layouts/card_wrapper", locals: { card_title: "Edit User" } do %>

          <% if @user && @user.errors.any? %>
            <div class="alert alert-danger">
              <ul>
                <% @user.errors.full_messages.each do |msg| %>
                  <li><%= msg %></li>
                <% end %>
              </ul>
            </div>
          <% end %>


          <%= form_with(model: [:admin, @user], local: true) do |form| %>
            <div class="form-group">
              <%= form.label :first_name %>
              <%= form.text_field :first_name, class: "form-control" %>
            </div>
            <div class="form-group">
              <%= form.label :last_name %>
              <%= form.text_field :last_name, class: "form-control" %>
            </div>
            <div class="form-group">
              <%= form.label :display_name %>
              <%= form.text_field :display_name, class: "form-control" %>
            </div>
            <div class="form-group">
              <%= form.label :relationship_to_couple, "Relationship to Wedding Couple", class: "form-label" %>
              <%= form.select :relationship_to_couple,
                           [["Select Relationship...", nil],
                            "Bride", "Groom", "Family", "Wedding Party", "Guest", "Officiant", "Vendors", "Friend", "Other"],
                           {},
                           class: "form-control" %>
            </div>
            <div class="form-group">
              <%= form.label :role %>
              <%= form.select :role, User.roles.keys.map { |r| [r.titleize, r] }, {}, class: "form-control" %>
            </div>
            <div class="d-flex gap-2 mt-3 mb-3">
              <%= form.submit "Update", class: "btn btn-success" %>
              <%= button_to "Delete User", admin_user_path(@user), method: :delete, form: { class: "d-inline" }, class: "btn btn-danger", data: { confirm: "Are you sure you want to delete this user and all associated memberships?" } %>

            </div>
          <% end %>

      <% end %>
        <div class="d-flex gap-2 mt-3 mb-3">
          <%= link_to "Cancel", "javascript:history.back()", class: "btn btn-secondary ml-2" %>

        </div>
      </div>
    </div>
  </div>
</div>