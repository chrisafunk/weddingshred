
<!-- app/views/leaderboard/_table_monthly.html.erb -->
<div class="table-responsive mt-3">
  <table class="table table-striped">
    <thead>
    <tr>
      <th>Rank</th><th>User</th><th>Days Logged</th><th>Streak</th><th>Last Logged</th><th>Completion</th>
    </tr>
    </thead>
    <tbody>
    <% rows.each_with_index do |r, idx| %>
      <% pct = (r[:days_logged].to_f / total_days * 100).round %>
      <tr>
        <td><%= ["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"][idx] %> <%= idx+1 %></td>
        <td><%= r[:user].try(:name).presence || r[:user].email %></td>
        <td><%= r[:days_logged] %> / <%= total_days %></td>
        <td><%= r[:current_streak] %> days</td>
        <td><%= r[:last_logged_on]&.to_s || "â€”" %></td>
        <td style="width:160px">
          <div class="progress">
            <div class="progress-bar bg-primary" role="progressbar" style="width:<%= pct %>%"></div>
          </div>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
